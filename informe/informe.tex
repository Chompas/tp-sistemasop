%% LyX 2.0.6 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[spanish]{article}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{listings}
\lstset{basicstyle={\footnotesize\ttfamily},
commentstyle={\color{blue}},
emph={si, //,{,}, +,=,<, >, para, cada, devolver, continuar, en, de},
keywordstyle={\color{red}},
language={bash},
stepnumber=1,
tabsize=2}
\usepackage{geometry}
\geometry{verbose,tmargin=3cm,bmargin=3cm,lmargin=3cm,rmargin=3cm}
\pagestyle{empty}
\setlength{\parskip}{\smallskipamount}
\setlength{\parindent}{0pt}
\usepackage{color}
\usepackage{babel}
\addto\shorthandsspanish{\spanishdeactivate{~<>}}

\usepackage{array}
\usepackage{float}
\usepackage{graphicx}
\usepackage[unicode=true,
 bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,
 breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=false]
 {hyperref}
\hypersetup{pdftitle={Sistemas Operativos},
 pdfauthor={Maria Ines Parnisari}}

\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
%% Because html converters don't know tabularnewline
\providecommand{\tabularnewline}{\\}

\@ifundefined{date}{}{\date{}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\usepackage{fancyhdr}% http://ctan.org/pkg/fancyhdr
\fancyhead{}% Clear all headers
\fancyfoot{}% Clear all footers
\fancyfoot[R]{\thepage}% Place "num page" in Right of footer
\fancyfoot[L]{Grupo 1 - Tema A}
\renewcommand{\headrulewidth}{0pt}% Remove header rule
%\renewcommand{\footrulewidth}{0pt}% Remove footer rule
\pagestyle{fancy}% Set page style to "fancy"

\makeatother

\begin{document}

\title{\textbf{Trabajo Práctico de Sistemas Operativos}}

\maketitle
\textbf{\large{Tema}}{\large{: A}}{\large \par}

\textbf{\large{Grupo}}{\large{: 1}}{\large \par}

\textbf{\large{Ayudante}}{\large{:}}{\large \par}

\begin{center}
{\large{}}%
\begin{tabular}{|c|c|}
\hline 
\multicolumn{2}{|c}{{\large{Evaluación grupal}}}\tabularnewline
\hline 
\hline 
{\large{Nota}} & \tabularnewline
\hline 
{\large{Fecha}} & \tabularnewline
\hline 
{\large{Firma}} & \tabularnewline
\hline 
\end{tabular}
\par\end{center}{\large \par}

\textbf{\large{Integrantes}}{\large{:}}{\large \par}

\begin{center}
{\large{}}%
\begin{tabular}{|c|c|c|>{\centering}p{2cm}|>{\centering}p{2cm}|>{\centering}p{2cm}|}
\hline 
 & {\large{Padrón}} & {\large{Apellido, nombre}} & {\large{Asistencia a entrega}} & {\large{Asistencia a revisión}} & {\large{Evaluación individual final}}\tabularnewline
\hline 
\hline 
{\large{1}} & {\large{87165}} & {\large{Tarcetti, Lucas Damian}} &  &  & \tabularnewline
\hline 
{\large{2}} & {\large{85840}} & {\large{Viscarra, Carlos Emiliano}} &  &  & \tabularnewline
\hline 
{\large{3}} & {\large{89683}} & {\large{Castarataro, Pablo}} &  &  & \tabularnewline
\hline 
{\large{4}} & {\large{86651}} & {\large{Zelechowski, Sergio}} &  &  & \tabularnewline
\hline 
{\large{5}} & {\large{93343}} & {\large{Lara, Javier }} &  &  & \tabularnewline
\hline 
{\large{6}} & {\large{92235}} & {\large{Parnisari, María Inés }} &  &  & \tabularnewline
\hline 
\end{tabular}
\par\end{center}{\large \par}

\pagebreak{}

\textbf{\large{Tema}}{\large{: A}}{\large \par}

\textbf{\large{Grupo}}{\large{: 1}}{\large \par}

\textbf{\large{Ayudante}}{\large{:}}{\large \par}

\begin{center}
{\large{}}%
\begin{tabular}{|c|c|}
\hline 
\multicolumn{2}{|c}{{\large{Evaluación grupal}}}\tabularnewline
\hline 
\hline 
{\large{Nota}} & \tabularnewline
\hline 
{\large{Fecha}} & \tabularnewline
\hline 
{\large{Firma}} & \tabularnewline
\hline 
\end{tabular}
\par\end{center}{\large \par}

\textbf{\large{Integrantes}}{\large{:}}{\large \par}

\begin{center}
{\large{}}%
\begin{tabular}{|c|c|c|>{\centering}p{2cm}|>{\centering}p{2cm}|>{\centering}p{2cm}|}
\hline 
 & {\large{Padrón}} & {\large{Apellido, nombre}} & {\large{Asistencia a entrega}} & {\large{Asistencia a revisión}} & {\large{Evaluación individual final}}\tabularnewline
\hline 
\hline 
{\large{1}} & {\large{87165}} & {\large{Tarcetti, Lucas Damian}} &  &  & \tabularnewline
\hline 
{\large{2}} & {\large{85840}} & {\large{Viscarra, Carlos Emiliano}} &  &  & \tabularnewline
\hline 
{\large{3}} & {\large{89683}} & {\large{Castarataro, Pablo}} &  &  & \tabularnewline
\hline 
{\large{4}} & {\large{86651}} & {\large{Zelechowski, Sergio}} &  &  & \tabularnewline
\hline 
{\large{5}} & {\large{93343}} & {\large{Lara, Javier }} &  &  & \tabularnewline
\hline 
{\large{6}} & {\large{92235}} & {\large{Parnisari, María Inés }} &  &  & \tabularnewline
\hline 
\end{tabular}
\par\end{center}{\large \par}

\pagebreak{}

\tableofcontents{}

\pagebreak{}


\section{Hipótesis y Aclaraciones Globales}
\begin{itemize}
\item \texttt{Instalar\_TP }

\begin{itemize}
\item El log de instalación es único. Todas las instalaciones loguearán
en el mismo archivo dentro de \texttt{\$CONFDIR}.
\item Recibe un único parámetro con la ruta del GRUPO. Ejemplo: \texttt{./Instalar\_TP.sh
\textquotedbl{}path/hasta/el/grupo\textquotedbl{}}.
\item El instalador buscará los archivos 'obras.mae', 'salas.mae' en la
carpeta 'mae'. Además buscará el archivo 'combos.disp' en la carpeta
'disp'.
\item Cuando se graba la variable 'grupo', la graba sin la barra final.
\end{itemize}
\item \texttt{Iniciar\_A}

\begin{itemize}
\item Antes de verificar que la configuración esté correcta, se escribe
en el log de instalación. Luego, se escribe en el log común.
\item El archivo de configuración debe estar en la carpeta correcta y con
el nombre correcto.
\end{itemize}
\item \texttt{Grabar\_L }

\begin{itemize}
\item Recibe un parámetro opcional \texttt{-i} para invocarlo sólo desde
el modulo de instalación.
\item Cuando el archivo de log es muy grande se quitan todas las líneas,
excepto las últimas 5.
\item Fecha y hora en formato DD-MM-AA HH:MM:SS.
\end{itemize}
\item \texttt{Mover\_A }

\begin{itemize}
\item El número de secuencia \texttt{nnn} es descentralizado (no es común
para todo el sistema). Se lo obtiene directamente del directorio de
duplicados, por eso no es necesario guardarlo.
\end{itemize}
\item \texttt{Imprimir\_A}

\begin{itemize}
\item Se usa un array asociativo (estructura de hash) para:

\begin{itemize}
\item Manejar las opciones y las funciones a las que están asociadas dichas
opciones. 
\item Manejar los eventos candidatos para la opción \textquotedbl{}-i\textquotedbl{}.
\end{itemize}
\item Si se especifica la opción \textquotedbl{}\texttt{t}\textquotedbl{},
el archivo se escribe siempre, independientemente de si se especificó
\textquotedbl{}\texttt{-w}\textquotedbl{} como argumento. El separador
del archivo escrito es \textquotedbl{};\textquotedbl{}. 
\item Para no permitir más de una ejecución en simultáneo, se utiliza un
archivo temporal llamado \texttt{Imprimir\_A.PID} que almacena el
PID del proceso corriendo.
\end{itemize}
\end{itemize}

\section{Problemas Relevantes}
\begin{itemize}
\item \textbf{Problema}: manejo de fechas en Reservar\_A.

\begin{itemize}
\item \textbf{Solución}: se leen las fechas y se pasan a formato YYYY/MM/DD
al usar la función \texttt{date}, para evitar problemas entre día
y mes o mes y día.
\end{itemize}
\item \textbf{Problema}: formato de archivos de entrada es incompatible
con Unix.

\begin{itemize}
\item \textbf{Solución}: se convirtieron los archivos que estaban en formato
Windows a formato Unix utilizando la herramienta \texttt{dos2unix},
ya que generaba problemas con los anclajes en las expresiones regulares.
\end{itemize}
\item \textbf{Problema}: caracteres especiales en los archivos de entrada
causaban problemas con las expresiones regulares.

\begin{itemize}
\item \textbf{Solución}: se agregó \texttt{LANG=C} al usar los comandos
\texttt{grep}.
\end{itemize}
\item \textbf{Problema}: las variables de ambiente no se estaban seteando
para todos los comandos.

\begin{itemize}
\item \textbf{Solución}: no correr el comando Iniciar\_A como un subproceso,
correrlo como \texttt{. ./Iniciar\_A}.
\end{itemize}
\end{itemize}

\section{Archivo README}

\begin{lstlisting}
Trabajo Práctico
===================
**Materia**: [75.08] Sistemas Operativos 
**Fecha**: Segundo Cuatrimestre de 2013 
**Grupo**: 1 
**Tema**: "A" 
**Integrantes**: 
* Lucas Tarcetti 
* Sergio Zelechowsky 
* Maria Ines Parnisari 
* Javier Lara 
* Pablo Castarataro 
* Emiliano Viscarra
Requisitos de instalación
--------------------
- Perl v5 o mayor. Si no lo tiene instalado, 
ejecute el siguiente comando: `sudo apt-get install perl`
- Bash v4 o mayor.
Cómo copiar desde un medio externo
--------------------
1. Insertar el dispositivo de almacenamiento que contiene el trabajo práctico.
2. Crear un directorio donde se desea copiar el contenido del trabajo práctico: 
`mkdir tp2013g1`
3. Copiar el archivo `.tgz` en el directorio recién creado: 
`cp /media/<NOMBRE_PENDRIVE>/<NOMBRE_ARCHIVO>.tgz tp2013g1`
4. Descomprimir y extrar el archivo `.tgz`: 
`tar -zxf <NOMBRE_ARCHIVO>.tgz`
Instalación
--------------------
1. Navegar hasta la carpeta donde se encuentran las funciones: 
`cd funciones`
2. Darle permisos de ejecución al script `Instalar_TP.sh`: 
`chmod +x Instalar_TP.sh`
3. Ejecutar el script pasando como parámetro la ruta donde 
se desee realizar las instalación: 
`./Instalar_TP.sh`
4. Seguir los pasos indicados.
Estructura post instalación
--------------------
Luego de la instalación se creará la siguiente estructura dentro de la carpeta
donde instalamos (en este ejemplo, `instalacion1`).
`-> aceptados 
-> arribos 
-> bin 
-> Grabar_L.sh 
-> Iniciar_A.sh 
-> Recibir_A.sh 
-> Imprimir_A.pl 
-> Mover_A.sh 
-> Reservar_A.sh 
-> Start_A.sh 
-> Stop_A.sh 
-> conf 
-> Instalar_TP.conf 
-> disp 
-> funciones 
-> log 
-> mae 
-> obras.mae 
-> salas.mae 
-> procesados 
-> combos.dis 
-> rechazados 
-> repo 
`
Los nombres de las carpetas pueden variar según lo que ingrese el usuario. 
Estos valores son los valores por defecto de la instalación.
Además en la carpeta `tp2013g1` hay una carpeta `conf` donde está el log del instalador.
Primeros pasos
--------------------
1. Ir al directorio de instalación de los ejecutables `bin`.
2. Ejecutar el comando `./Iniciar_A.sh`.
3. Correr el demonio eligiendo `Si` al final de la ejecución del `Iniciar_A`, 
o corriendo `./Start_A.sh`
\end{lstlisting}



\section{Esquema de ejecución}

\noindent \begin{center}
\includegraphics[scale=0.59]{\string"Activity Diagram0\string".png}
\par\end{center}


\section{Listado de Nuevas Funciones y/o Comandos Auxiliares }

FIXME
\begin{itemize}
\item Desinstalar\_TP.sh
\end{itemize}

\section{Nuevos Archivos}
\begin{itemize}
\item Nombre de archivo: \texttt{Imprimir\_A.PID}

\begin{itemize}
\item Temporal
\item Almacenado en: /tmp
\item Utilizado por: Imprimir\_A
\item Uso: permitir solo una instancia en ejecución del programa.
\end{itemize}
\item Nombre de archivo:\texttt{ pidgrabarlogfile}

\begin{itemize}
\item Temporal
\item Almacenado en: /tmp
\item Utilizado por: Reservar\_A
\item Uso: permitir solo una instancia en ejecución del programa.
\end{itemize}
\item Nombre de archivo: \texttt{configuracion.conf.tmp}

\begin{itemize}
\item Temporal
\item Almacenado en: /funciones
\item Utilizado en: /tmp
\item Uso: almacenar el contenido del archivo temporalmente por seguridad.
\end{itemize}
\end{itemize}

\section{Listado de Datos}

FIXME: incluir SALAS, OBRAS, COMBOS, RESERVAS.


\section{Hoja de Ruta de Prueba ``Camino Feliz''}

FIXME

\pagebreak{}


\section*{Apéndice}

(Enunciado)
\end{document}
